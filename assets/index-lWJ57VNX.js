import{p as Q,f as _,s as i,c as a,t as G,i as x,j as S,k as u,l as T,o as Z,g as e,b as K,m as I,h as F,B as V,z as $,A as tt,d as W,y as et,n as N,J as R}from"./index-CiVeqNK5.js";import{s as r}from"./GLTFLoader-CQaeW04e.js";import{D as H,o as O,F as at,I as P,G as it,H as st,v as rt}from"./index-DfbJhxeW.js";import{b as U}from"./input-CY0t1r-S.js";var vt=_('<div class="success-content svelte-1gtgz23"><div class="item-display svelte-1gtgz23"><img class="item-image svelte-1gtgz23"/> <div class="item-info svelte-1gtgz23"><div class="item-name svelte-1gtgz23"> </div></div></div> <p class="hint svelte-1gtgz23">點擊空白位置以關閉</p></div>');function nt(g,t){Q(t,!0);var y=vt(),q=a(y),s=a(q),m=i(s,2),l=a(m),b=a(l);G(o=>{r(s,"src",o),r(s,"alt",t.item.name),x(b,`獲得：${t.item.name??""} × ${t.quantity??""}`)},[()=>H(t.item.itemId)?.src??""]),S("error",s,o=>o.preventDefault()),u(g,y),T()}var lt=(g,t)=>t.closeDialog(),ct=_('<div class="loading svelte-1ttqaeh">請稍候...</div>'),mt=_('<div class="container svelte-1ttqaeh"><div class="item-info svelte-1ttqaeh"><img class="item-image svelte-1ttqaeh"/> <div class="item-detail svelte-1ttqaeh"><div class="item-label svelte-1ttqaeh"> <span></span> </div> <div class="item-owned svelte-1ttqaeh"> </div></div> <form class="item-purchase svelte-1ttqaeh"><input class="purchase-quantity-range svelte-1ttqaeh" type="range"/> &times;<input class="purchase-quantity svelte-1ttqaeh" type="number"/> <div class="btn-list svelte-1ttqaeh"><button type="button" class="btn svelte-1ttqaeh">取消</button> <button type="submit" class="btn svelte-1ttqaeh">購買</button></div></form></div> <div class="item-description svelte-1ttqaeh"> </div> <!></div>');function ot(g,t){Q(t,!0);const y=I(()=>O[P.coin]?.quantity??0),q=I(()=>O[t.item.itemId]?.quantity??0);let s=K(1);const m=I(()=>Math.min(Math.floor(e(y)/t.item.price.amount),99)),l=I(()=>e(m)>=e(s));let b=K(!1);async function o(n){n.preventDefault(),e(l)&&(F(b,!0),await at(t.item,e(s)),F(b,!1),await V(nt,{props:{item:t.item,quantity:e(s)}}))}var D=mt(),w=a(D),z=a(w),M=i(z,2),d=a(M),p=a(d),A=i(p,2),J=i(d,2),B=a(J),C=i(M,2),c=a(C);r(c,"min",1);var v=i(c,2);r(v,"min",1);var h=i(v,2),f=a(h);f.__click=[lt,t];var L=i(f,2),j=i(w,2),k=a(j),X=i(j,2);{var Y=n=>{var E=ct();$(3,E,()=>tt,()=>({duration:250})),u(n,E)};Z(X,n=>{e(b)&&n(Y)})}G(n=>{r(z,"src",n),r(z,"alt",t.item.name),x(p,`${t.item.name??""} `),x(A,` $${t.item.price.amount??""}`),x(B,`已擁有：${e(q)??""} 個`),r(c,"max",e(m)),c.disabled=!e(l),r(v,"max",e(m)),v.disabled=!e(l),L.disabled=!e(l),x(k,t.item.description)},[()=>H(t.item.itemId).src]),S("submit",C,o),U(c,()=>e(s),n=>F(s,n)),U(v,()=>e(s),n=>F(s,n)),u(g,D),T()}W(["click"]);var dt=()=>history.back(),ut=(g,t)=>V(ot,{props:{item:e(t)}}),_t=_('<button class="item svelte-irnz7x"><img class="item-image svelte-irnz7x"/> <p class="label svelte-irnz7x"> </p></button>'),gt=_('<div class="empty-item svelte-irnz7x"><div class="empty-item-img svelte-irnz7x"></div></div>'),bt=_('<div class="list-container svelte-irnz7x"><div class="list svelte-irnz7x"><!> <!></div></div>'),ht=_('<div class="loading svelte-irnz7x">載入中……</div>'),ft=_('<main class="svelte-irnz7x"><header class="svelte-irnz7x"><h1 class="label svelte-irnz7x">菜菜商店</h1> <button class="back svelte-irnz7x"><img alt="back" class="svelte-irnz7x"/></button></header> <!> <footer class="svelte-irnz7x"><span class="currency-amount label svelte-irnz7x"><img class="currency-icon svelte-irnz7x" alt=""/> </span></footer></main>');function qt(g,t){Q(t,!0);const y=it(),q=I(()=>O[P.coin]?.quantity??0);var s=ft(),m=a(s),l=i(a(m),2);l.__click=[dt];var b=a(l),o=i(m,2);et(o,()=>y,d=>{var p=ht();u(d,p)},(d,p)=>{var A=bt(),J=a(A),B=a(J);N(B,17,()=>e(p),R,(c,v)=>{var h=_t();h.__click=[ut,v];var f=a(h),L=i(f,2),j=a(L);G(k=>{r(f,"src",k),r(f,"alt",e(v).name),x(j,`$${e(v).price.amount??""}`)},[()=>H(e(v).itemId)?.src]),S("error",f,k=>k.preventDefault()),u(c,h)});var C=i(B,2);N(C,17,()=>Array.from({length:Math.max(0,24-st.length)}),R,(c,v)=>{var h=gt();u(c,h)}),u(d,A)});var D=i(o,2),w=a(D),z=a(w),M=i(z);G(d=>{r(b,"src",rt.back.src),r(z,"src",d),x(M,` $${e(q)??""}`)},[()=>H(P.coin).src]),u(g,s),T()}W(["click"]);export{qt as default};
