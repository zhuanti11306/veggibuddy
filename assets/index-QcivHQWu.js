import{f as p,t as m,k as v,D as G,c as a,p as M,E as O,l as z,x as F,o as B,s as u,z as Q,F as W,G as H,g as l,m as E,i as R,H as C,C as I,d as X}from"./index-CiVeqNK5.js";import{o as Y,s as L}from"./GLTFLoader-CQaeW04e.js";import{i as S,p as D,j as Z,c as tt,r as et,k as st,n as at,o as $,I as N,q as ot,t as nt,v as w}from"./index-DfbJhxeW.js";import{s as rt}from"./class-CNRfvg9s.js";const lt=(o,e)=>{let t;const d=e?.duration??500,b=s=>{s.button===0&&(t=window.setTimeout(()=>{t=void 0,e?.onlongpress?.(s)},d))},g=s=>{s.button===0&&t&&(clearTimeout(t),t=void 0,e?.onclick?.(s))},i=s=>{t&&(clearTimeout(t),t=void 0)};return o.addEventListener("pointerdown",b),o.addEventListener("pointerup",g),o.addEventListener("pointerleave",i),{update(s){e=s},destroy(){o.removeEventListener("pointerdown",b),o.removeEventListener("pointerup",g),o.removeEventListener("pointerleave",i)}}};var it=p("<div><!></div>");function T(o,e){var t=it(),d=a(t);S(d,()=>e.children??G),m(()=>rt(t,1,`button-list ${e.position??""}`,"svelte-85gwiu")),v(o,t)}var ct=p('<div class="shortcut-list svelte-17m5ggq"><!></div>'),vt=p("<!> <!>",1);function ut(o,e){M(e,!0);let t=O(e,"showShortcuts",15,!1);function d(){t(!t())}T(o,{get position(){return e.position},children:(b,g)=>{var i=vt(),s=F(i);{var h=_=>{var f=ct(),n=a(f);S(n,()=>e.shortcuts,()=>d),Q(3,f,()=>W,()=>({duration:250,axis:"y"})),v(_,f)};B(s,_=>{e.shortcuts&&t()&&_(h)})}var P=u(s,2);S(P,()=>e.children??G,()=>d),v(b,i)}}),z()}var pt=p('<div class="level-container svelte-1y2gtf8"><div class="level svelte-1y2gtf8"><span class="label svelte-1y2gtf8">LEVEL</span> <span class="value svelte-1y2gtf8"> </span> <span class="progress-bar svelte-1y2gtf8"><span class="progress svelte-1y2gtf8"></span> <span class="progress-label svelte-1y2gtf8"> </span></span></div></div>');function dt(o,e){M(e,!0);const t=E(()=>D.isLegal?D:{}),d=E(()=>C(l(t).level,NaN)),b=E(()=>C(l(t).aimValue,NaN)),g=E(()=>C(l(t).growthValue,NaN));H(()=>{D.isLegal||Z()});var i=pt(),s=a(i),h=u(a(s),2),P=a(h),_=u(h,2),f=a(_),n=u(f,2),r=a(n);m(c=>{R(P,l(d)),tt(f,`width: ${c??""}%;`),R(r,`${l(g)??""} / ${l(b)??""}`)},[()=>Math.min(l(g)/l(b),1)*100]),v(o,i),z()}var _t=p('<button type="button" class="button svelte-k1ejc0"><img alt="設定" draggable="false" class="svelte-k1ejc0"/> <span class="label svelte-k1ejc0">設定</span></button>'),bt=()=>I("./chat"),gt=()=>I("./shop"),ft=p('<button type="button" class="button svelte-k1ejc0"><img alt="對話" draggable="false" class="svelte-k1ejc0"/> <span class="label svelte-k1ejc0">對話</span></button> <button type="button" class="button svelte-k1ejc0"><img alt="商店" draggable="false" class="svelte-k1ejc0"/> <span class="label svelte-k1ejc0">商店</span></button>',1),mt=(o,e)=>l(e)>0&&st(),ht=()=>I("./throwing-ball"),kt=p('<button type="button" class="button shortcut-button svelte-k1ejc0"><img alt="丟球" draggable="false" class="svelte-k1ejc0"/> <span class="label svelte-k1ejc0">丟球</span></button>'),jt=()=>I("./hide-and-seek"),yt=p('<button type="button" class="button shortcut-button svelte-k1ejc0"><img alt="捉迷藏" draggable="false" class="svelte-k1ejc0"/> <span class="label svelte-k1ejc0">捉迷藏</span></button>'),Lt=p('<button type="button" class="button shortcut-button svelte-k1ejc0"><img alt="餵食" draggable="false" class="svelte-k1ejc0"/> <span class="label svelte-k1ejc0"> </span></button> <!> <!>',1),wt=p('<button type="button" class="button svelte-k1ejc0"><img alt="背包" draggable="false" class="svelte-k1ejc0"/> <span class="label svelte-k1ejc0">背包</span></button>'),Et=p('<main class="svelte-k1ejc0"><!> <!> <!> <!></main>');function Nt(o,e){M(e,!0),H(()=>{et()});let t=E(()=>($[N.generalFood]?.quantity??0)+($[N.premiumFood]?.quantity??0)),d=E(()=>!!$[N.ball]),b=E(()=>!!$[N.veggieCam]);Y(()=>(ot(),()=>nt()));var g=Et(),i=a(g);dt(i,{});var s=u(i,2);T(s,{position:"top-right",children:(_,f)=>{var n=_t(),r=a(n);m(()=>L(r,"src",w.settings.src)),v(_,n)}});var h=u(s,2);T(h,{position:"bottom-left",children:(_,f)=>{var n=ft(),r=F(n);r.__click=[bt];var c=a(r),k=u(r,2);k.__click=[gt];var x=a(k);m(()=>{L(c,"src",w.chat.src),L(x,"src",w.shop.src)}),v(_,n)}});var P=u(h,2);ut(P,{position:"bottom-right",shortcuts:n=>{var r=Lt(),c=F(r);c.__click=[mt,t];var k=a(c),x=u(k,2),V=a(x),A=u(c,2);{var U=j=>{var y=kt();y.__click=[ht];var q=a(y);m(()=>L(q,"src",w.ball.src)),v(j,y)};B(A,j=>{l(d)&&j(U)})}var J=u(A,2);{var K=j=>{var y=yt();y.__click=[jt];var q=a(y);m(()=>L(q,"src",w.camera.src)),v(j,y)};B(J,j=>{l(b)&&j(K)})}m(()=>{L(k,"src",w.feed.src),R(V,`餵食 ${l(t)??""}`)}),v(n,r)},children:(n,r=G)=>{var c=wt(),k=a(c);at(c,(x,V)=>lt?.(x,V),()=>({onclick:()=>I("./backpack"),onlongpress:r()})),m(()=>L(k,"src",w.inventory.src)),v(n,c)},$$slots:{shortcuts:!0,default:!0}}),v(o,g),z()}X(["click"]);export{Nt as default};
