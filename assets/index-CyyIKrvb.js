import{p as O,h as _,C as i,l as a,A as Q,F as r,B as f,e as S,b as u,g as T,u as Z,j as e,r as K,w as I,P as N,v as P,t as $,m as tt,d as V,x as et,a as R,Q as U}from"./vendor-BEoA47yD.js";import{F as j,n as J,G as at,I as L,H as it,J as st,t as rt}from"./settings.svelte-DYwtrQ_B.js";import{o as W}from"./dialogs-DZWjIJ8s.js";import"./firebase-LKE9M92C.js";var vt=_('<div class="success-content svelte-1gtgz23"><div class="item-display svelte-1gtgz23"><img class="item-image svelte-1gtgz23"/> <div class="item-info svelte-1gtgz23"><div class="item-name svelte-1gtgz23"> </div></div></div> <p class="hint svelte-1gtgz23">點擊空白位置以關閉</p></div>');function nt(g,t){O(t,!0);var y=vt(),z=a(y),s=a(z),m=i(s,2),l=a(m),b=a(l);Q(o=>{r(s,"src",o),r(s,"alt",t.item.name),f(b,`獲得：${t.item.name??""} × ${t.quantity??""}`)},[()=>j(t.item.itemId)?.src??""]),S("error",s,o=>o.preventDefault()),u(g,y),T()}var lt=(g,t)=>t.closeDialog(),ct=_('<div class="loading svelte-1ttqaeh">請稍候...</div>'),mt=_('<div class="container svelte-1ttqaeh"><div class="item-info svelte-1ttqaeh"><img class="item-image svelte-1ttqaeh"/> <div class="item-detail svelte-1ttqaeh"><div class="item-label svelte-1ttqaeh"> <span></span> </div> <div class="item-owned svelte-1ttqaeh"> </div></div> <form class="item-purchase svelte-1ttqaeh"><input class="purchase-quantity-range svelte-1ttqaeh" type="range"/> &times;<input class="purchase-quantity svelte-1ttqaeh" type="number"/> <div class="btn-list svelte-1ttqaeh"><button type="button" class="btn svelte-1ttqaeh">取消</button> <button type="submit" class="btn svelte-1ttqaeh">購買</button></div></form></div> <div class="item-description svelte-1ttqaeh"> </div> <!></div>');function ot(g,t){O(t,!0);const y=I(()=>J[L.coin]?.quantity??0),z=I(()=>J[t.item.itemId]?.quantity??0);let s=K(1);const m=I(()=>Math.min(Math.floor(e(y)/t.item.price.amount),99)),l=I(()=>e(m)>=e(s));let b=K(!1);async function o(n){n.preventDefault(),e(l)&&(P(b,!0),await at(t.item,e(s)),P(b,!1),await W(nt,{props:{item:t.item,quantity:e(s)}}))}var w=mt(),D=a(w),p=a(D),M=i(p,2),d=a(M),q=a(d),A=i(q,2),G=i(d,2),C=a(G),B=i(M,2),c=a(B);r(c,"min",1);var v=i(c,2);r(v,"min",1);var h=i(v,2),x=a(h);x.__click=[lt,t];var H=i(x,2),F=i(D,2),k=a(F),X=i(F,2);{var Y=n=>{var E=ct();$(3,E,()=>tt,()=>({duration:250})),u(n,E)};Z(X,n=>{e(b)&&n(Y)})}Q(n=>{r(p,"src",n),r(p,"alt",t.item.name),f(q,`${t.item.name??""} `),f(A,` $${t.item.price.amount??""}`),f(C,`已擁有：${e(z)??""} 個`),r(c,"max",e(m)),c.disabled=!e(l),r(v,"max",e(m)),v.disabled=!e(l),H.disabled=!e(l),f(k,t.item.description)},[()=>j(t.item.itemId).src]),S("submit",B,o),N(c,()=>e(s),n=>P(s,n)),N(v,()=>e(s),n=>P(s,n)),u(g,w),T()}V(["click"]);var dt=()=>history.back(),ut=(g,t)=>W(ot,{props:{item:e(t)}}),_t=_('<button class="item svelte-irnz7x"><img class="item-image svelte-irnz7x"/> <p class="label svelte-irnz7x"> </p></button>'),gt=_('<div class="empty-item svelte-irnz7x"><div class="empty-item-img svelte-irnz7x"></div></div>'),bt=_('<div class="list-container svelte-irnz7x"><div class="list svelte-irnz7x"><!> <!></div></div>'),ht=_('<div class="loading svelte-irnz7x">載入中……</div>'),xt=_('<main class="svelte-irnz7x"><header class="svelte-irnz7x"><h1 class="label svelte-irnz7x">菜菜商店</h1> <button class="back svelte-irnz7x"><img alt="back" class="svelte-irnz7x"/></button></header> <!> <footer class="svelte-irnz7x"><span class="currency-amount label svelte-irnz7x"><img class="currency-icon svelte-irnz7x" alt=""/> </span></footer></main>');function zt(g,t){O(t,!0);const y=it(),z=I(()=>J[L.coin]?.quantity??0);var s=xt(),m=a(s),l=i(a(m),2);l.__click=[dt];var b=a(l),o=i(m,2);et(o,()=>y,d=>{var q=ht();u(d,q)},(d,q)=>{var A=bt(),G=a(A),C=a(G);R(C,17,()=>e(q),U,(c,v)=>{var h=_t();h.__click=[ut,v];var x=a(h),H=i(x,2),F=a(H);Q(k=>{r(x,"src",k),r(x,"alt",e(v).name),f(F,`$${e(v).price.amount??""}`)},[()=>j(e(v).itemId)?.src]),S("error",x,k=>k.preventDefault()),u(c,h)});var B=i(C,2);R(B,17,()=>Array.from({length:Math.max(0,24-st.length)}),U,(c,v)=>{var h=gt();u(c,h)}),u(d,A)});var w=i(o,2),D=a(w),p=a(D),M=i(p);Q(d=>{r(b,"src",rt.back.src),r(p,"src",d),f(M,` $${e(z)??""}`)},[()=>j(L.coin).src]),u(g,s),T()}V(["click"]);export{zt as default};
