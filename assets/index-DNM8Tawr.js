import{f as s,t,k as e,D as a,c as l,p as n,E as o,l as c,x as r,o as i,s as v,z as u,F as p,G as b,g as d,m as g,i as k,H as m,C as f,d as h}from"./index-B74hZ3uX.js";import{t as j,j as y,p as _,k as w,d as L,r as E,o as N,n as $,q as x,v as q,I as F,w as T,x as V,s as C,y as z}from"./index-BruxziNw.js";var A=s("<div><!></div>");function D(s,n){var o=A(),c=l(o);y(c,()=>n.children??a),t(()=>function(s,t,e,a,l,n){var o=s.__className;if(o!==e||void 0===o){var c=j(e,a);null==c?s.removeAttribute("class"):s.className=c,s.__className=e}return n}(o,0,`button-list ${n.position??""}`,"svelte-85gwiu")),e(s,o)}var G=s('<div class="shortcut-list svelte-17m5ggq"><!></div>'),H=s("<!> <!>",1);var I=s('<div class="level-container svelte-1y2gtf8"><div class="level svelte-1y2gtf8"><span class="label svelte-1y2gtf8">LEVEL</span> <span class="value svelte-1y2gtf8"> </span> <span class="progress-bar svelte-1y2gtf8"><span class="progress svelte-1y2gtf8"></span> <span class="progress-label svelte-1y2gtf8"> </span></span></div></div>');var M=s('<button type="button" class="button svelte-k1ejc0"><img alt="設定" draggable="false" class="svelte-k1ejc0"/> <span class="label svelte-k1ejc0">設定</span></button>'),S=()=>f("./chat"),B=()=>f("./shop"),J=s('<button type="button" class="button svelte-k1ejc0"><img alt="對話" draggable="false" class="svelte-k1ejc0"/> <span class="label svelte-k1ejc0">對話</span></button> <button type="button" class="button svelte-k1ejc0"><img alt="商店" draggable="false" class="svelte-k1ejc0"/> <span class="label svelte-k1ejc0">商店</span></button>',1),K=(s,t)=>d(t)>0&&$(),O=()=>f("./throwing-ball"),P=s('<button type="button" class="button shortcut-button svelte-k1ejc0"><img alt="丟球" draggable="false" class="svelte-k1ejc0"/> <span class="label svelte-k1ejc0">丟球</span></button>'),Q=()=>f("./hide-and-seek"),R=s('<button type="button" class="button shortcut-button svelte-k1ejc0"><img alt="捉迷藏" draggable="false" class="svelte-k1ejc0"/> <span class="label svelte-k1ejc0">捉迷藏</span></button>'),U=s('<button type="button" class="button shortcut-button svelte-k1ejc0"><img alt="餵食" draggable="false" class="svelte-k1ejc0"/> <span class="label svelte-k1ejc0"> </span></button> <!> <!>',1),W=s('<button type="button" class="button svelte-k1ejc0"><img alt="背包" draggable="false" class="svelte-k1ejc0"/> <span class="label svelte-k1ejc0">背包</span></button>'),X=s('<main class="svelte-k1ejc0"><!> <!> <!> <!></main>');function Y(s,h){n(h,!0),b(()=>{E()});let j=g(()=>(q[F.generalFood]?.quantity??0)+(q[F.premiumFood]?.quantity??0)),$=g(()=>!!q[F.ball]),A=g(()=>!!q[F.veggieCam]);N(()=>(T(),()=>V()));var Y=X(),Z=l(Y);!function(s,a){n(a,!0);const o=g(()=>_.isLegal?_:{}),r=g(()=>m(d(o).level,NaN)),i=g(()=>m(d(o).aimValue,NaN)),u=g(()=>m(d(o).growthValue,NaN));b(()=>{_.isLegal||w()});var p=I(),f=l(p),h=v(l(f),2),j=l(h),y=v(h,2),E=l(y),N=v(E,2),$=l(N);t(s=>{k(j,d(r)),L(E,`width: ${s??""}%;`),k($,`${d(u)??""} / ${d(i)??""}`)},[()=>100*Math.min(d(u)/d(i),1)]),e(s,p),c()}(Z,{});var ss=v(Z,2);D(ss,{position:"top-right",children:(s,a)=>{var n=M(),o=l(n);t(()=>C(o,"src",z.settings.src)),e(s,n)}});var ts=v(ss,2);D(ts,{position:"bottom-left",children:(s,a)=>{var n=J(),o=r(n);o.__click=[S];var c=l(o),i=v(o,2);i.__click=[B];var u=l(i);t(()=>{C(c,"src",z.chat.src),C(u,"src",z.shop.src)}),e(s,n)}});{const s=(s,n=a)=>{var o=W(),c=l(o);x(o,(s,t)=>((s,t)=>{let e;const a=t?.duration??500,l=s=>{0===s.button&&(e=window.setTimeout(()=>{e=void 0,t?.onlongpress?.(s)},a))},n=s=>{0===s.button&&e&&(clearTimeout(e),e=void 0,t?.onclick?.(s))},o=s=>{e&&(clearTimeout(e),e=void 0)};return s.addEventListener("pointerdown",l),s.addEventListener("pointerup",n),s.addEventListener("pointerleave",o),{update(s){t=s},destroy(){s.removeEventListener("pointerdown",l),s.removeEventListener("pointerup",n),s.removeEventListener("pointerleave",o)}}})?.(s,t),()=>({onclick:()=>f("./backpack"),onlongpress:n()})),t(()=>C(c,"src",z.inventory.src)),e(s,o)};!function(s,t){n(t,!0);let b=o(t,"showShortcuts",15,!1);function d(){b(!b())}D(s,{get position(){return t.position},children:(s,n)=>{var o=H(),c=r(o),g=s=>{var a=G(),n=l(a);y(n,()=>t.shortcuts,()=>d),u(3,a,()=>p,()=>({duration:250,axis:"y"})),e(s,a)};i(c,s=>{t.shortcuts&&b()&&s(g)});var k=v(c,2);y(k,()=>t.children??a,()=>d),e(s,o)}}),c()}(v(ts,2),{position:"bottom-right",shortcuts:s=>{var a=U(),n=r(a);n.__click=[K,j];var o=l(n),c=v(o,2),u=l(c),p=v(n,2),b=s=>{var a=P();a.__click=[O];var n=l(a);t(()=>C(n,"src",z.ball.src)),e(s,a)};i(p,s=>{d($)&&s(b)});var g=v(p,2),m=s=>{var a=R();a.__click=[Q];var n=l(a);t(()=>C(n,"src",z.camera.src)),e(s,a)};i(g,s=>{d(A)&&s(m)}),t(()=>{C(o,"src",z.feed.src),k(u,`餵食 ${d(j)??""}`)}),e(s,a)},children:s,$$slots:{shortcuts:!0,default:!0}})}e(s,Y),c()}h(["click"]);export{Y as default};
